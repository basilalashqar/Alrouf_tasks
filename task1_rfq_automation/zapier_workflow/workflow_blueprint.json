{
  "zapier_workflow": {
    "name": "RFQ â†’ CRM Automation",
    "description": "Complete RFQ processing workflow using Zapier",
    "version": "1.0.0",
    "trigger": {
      "type": "Gmail",
      "action": "New Email",
      "filters": {
        "subject_contains": ["RFQ", "Quote", "Quotation"],
        "body_contains": ["ALR-", "streetlight", "poles", "lighting"],
        "from_domain": "external_only"
      }
    },
    "steps": [
      {
        "step": 1,
        "name": "Extract Fields with OpenAI",
        "app": "OpenAI",
        "action": "Create Chat Completion",
        "prompt": "Extract structured data from this RFQ email and return JSON with: client_name, client_email, client_phone, product_model, quantity, location, timeline, language",
        "model": "gpt-3.5-turbo",
        "temperature": 0.1
      },
      {
        "step": 2,
        "name": "Write to Google Sheets",
        "app": "Google Sheets",
        "action": "Create Spreadsheet Row",
        "spreadsheet_id": "{{GOOGLE_SHEETS_ID}}",
        "worksheet": "RFQ_Data",
        "data": {
          "Timestamp": "{{zap_meta_utc}}",
          "Client Name": "{{openai_response.client_name}}",
          "Email": "{{gmail_from}}",
          "Product": "{{openai_response.product_model}}",
          "Quantity": "{{openai_response.quantity}}",
          "Location": "{{openai_response.location}}",
          "Timeline": "{{openai_response.timeline}}",
          "Language": "{{openai_response.language}}",
          "Status": "Pending"
        }
      },
      {
        "step": 3,
        "name": "Create Salesforce Opportunity",
        "app": "Salesforce",
        "action": "Create Record",
        "object": "Opportunity",
        "data": {
          "Name": "RFQ - {{openai_response.product_model}} - {{openai_response.client_name}}",
          "AccountId": "{{salesforce_account_id}}",
          "StageName": "Prospecting",
          "CloseDate": "{{calculated_close_date}}",
          "Amount": "{{estimated_amount}}",
          "LeadSource": "Email RFQ",
          "Description": "RFQ for {{openai_response.quantity}} units of {{openai_response.product_model}}"
        }
      },
      {
        "step": 4,
        "name": "Archive Attachments to Drive",
        "app": "Google Drive",
        "action": "Upload File",
        "folder_id": "{{GOOGLE_DRIVE_FOLDER_ID}}",
        "subfolder": "{{openai_response.client_name}}",
        "files": "{{gmail_attachments}}"
      },
      {
        "step": 5,
        "name": "Send Auto-Reply",
        "app": "Gmail",
        "action": "Send Email",
        "to": "{{gmail_from}}",
        "subject": "RFQ Confirmation - {{openai_response.product_model}}",
        "body": "{{auto_reply_template}}",
        "language": "{{openai_response.language}}"
      },
      {
        "step": 6,
        "name": "Post Slack Alert",
        "app": "Slack",
        "action": "Send Message",
        "channel": "#sales-alerts",
        "message": "{{slack_alert_template}}",
        "format": "rich"
      }
    ],
    "error_handling": {
      "retry_attempts": 3,
      "fallback_actions": [
        "Send error notification email",
        "Log to Google Sheets error log",
        "Create Salesforce case"
      ]
    },
    "monitoring": {
      "success_webhook": "{{SUCCESS_WEBHOOK_URL}}",
      "error_webhook": "{{ERROR_WEBHOOK_URL}}",
      "metrics_tracking": true
    }
  }
}
